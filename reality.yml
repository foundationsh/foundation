api: reality
settings:
  kubectl_command:
    - kubectl
  registry: null
  secrets_file: ./secrets.yml
order:
  - name: database
    type: microservice

  - name: identity
    type: microservice

  - name: upx
    type: microservice

  - name: portfolio
    type: microservice

  - name: gateway
    type: microservice

  - name: proxy
    type: microservice

  - name: portfolio
    type: application
components:
  - name: database
    type: microservice
    path: src/Reality.Database
    build:
      context: ./src
      dockerfile: ./Reality.Database/Dockerfile
    replicas: 1
    ports:
      - expose: 27017
        containerPort: 27017
    mode:
      compose:
        build: false
        sync: false
      kubernetes:
        build: false
        sync: false

  - name: identity
    type: microservice
    path: src/Reality.Services.Identity
    build:
      context: ./src
      dockerfile: ./Reality.Services.Identity/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: true
        sync: true

  - name: upx
    type: microservice
    path: src/Reality.Services.UPx
    build:
      context: ./src
      dockerfile: ./Reality.Servies.UPx/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: true
        sync: true

  - name: portfolio
    type: microservice
    path: src/Reality.Services.Portfolio
    build:
      context: ./src
      dockerfile: ./Reality.Services.Portfolio/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: true
        sync: true

  - name: gateway
    type: microservice
    path: src/Reality.Services.Gateway
    build:
      context: ./src
      dockerfile: ./Reality.Services.Gateway/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: true
        sync: true

  - name: proxy
    type: microservice
    path: src/Reality.Services.Proxy
    build:
      context: ./src
      dockerfile: ./Reality.Services.Proxy/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: false
        sync: false

  - name: portfolio
    type: application
    path: src/Portfolio
    build:
      context: ./src
      dockerfile: ./Portfolio/Dockerfile
    replicas: 1
    ports:
      - expose: 80
        containerPort: 80
    mode:
      compose:
        build: true
        sync: false
      kubernetes:
        build: true
        sync: true
